---
title: "Untitled"
author: "Maïlis"
date: "3/8/2023"
output: html_document
---
##R Markdown Syntax

![Grumpy Cat](https://www.leparisien.fr/resizer/fGXimQvLycC2XjTOb9nran3rDcU=/1248x782/filters:focal(1184x745:1194x755)/cloudfront-eu-central-1.images.arcpublishing.com/leparisien/NJE5TPKX7NDY3AL7MWIJJEXZOA.jpg)

## 2) "A quote"

>Thus, you can simply find that the cats usually looks lazy, lying somewhere, but opening … lazy, but actually they are smart and deliberate.

## 3) "Three emojis"

install.packages("emo")
install.packages("devtools")
devtools::install_github("hadley/emo")

`r emo::ji('vomit')` `r emo::ji('cry')` `r emo::ji('poop')`

## 4) large giphy 

![NOPE](https://media4.giphy.com/media/vPN3zK9dNL236/200w.gif?cid=6c09b9522xy6iu0scvx8dhpuwb0mstb5bmwwciaqurhbg15y&rid=200w.gif&ct=g) 

## 4) small giphy
<img src='https://media2.giphy.com/media/HNMRdQec5e2l2/giphy.gif' width='300' height='200' />
  
  ## 5) table of courses i have
  
  +---------------+---------------+
  | classes         | time        | 
  +===============+===============+
  | Introduction  |    2pm-6pm    |
  | to data science               | 
  +---------------+---------------+
  | Microeconomics|               | 
  |        2      |               | 
  +---------------+---------------+
  | Sexologie     | $2.10         | 
  |               |               |
  +---------------+---------------+
  | Finance de 
| l'immobilier    2pm-4pm       | 
|               |  wednesday    | 
+---------------+---------------+
| Ogo           | 12am-4pm      | 
|               |               | 
+---------------+---------------+
| Emotion       |               | 
+---------------+---------------+

## 6) a short video

<iframe width="560" height="315" src="https://www.youtube.com/embed/h65VcvKQxns" title="YouTube video player" frameborder="0" dataexternal="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

## R markdown Syntax
##(1)Show an example where the chunk option cache = T leads to a misleading answer. This example must be different from the one presented in the textbook.


```{r computeA, cache=TRUE}
a=8
```

```{r, cache=TRUE}
(e=3*a+1)
```


##(2) Simulate 100 random samples from a Uniform(0,1) distribution using the function runif(). Store these 100 values in a vector called x. Then, compute the empirical mean, median and variance of x. Are these results different from 1/2, 1/2 and 1/12 (their respective theoretical values)? Is this result surprising? Justify your answer.

set.seed(100)
samples<-runif(n=100, min=0, max=1)
x<-samples
print(x)

empirical_mean<-((0+1)/2)
empirical_median<-((1-0)/12)
empirical_var<-var(x)

the mean and the median are approximately equal to 1/2 but the variance isn't equal to 1/12

##(3)Include a graph showing the histogram of x (make sure to include a caption to this figure), this can be done in R using the function hist().

hist(x,xlab="uniform distribution of 100 random samples")

##(4) Include the following centered equations:

$$\frac{\partial l}{\partial \sigma ^2}=-\frac{1}{2}N_T\sigma ^{-2}+\frac{1}{2}\sigma^{-4}\mathbf{\sum (y_i-X_i\beta)'V_i^{-1}(y_i-X_i\beta )}$$

##(5) Include the following in-line equation: A≡[ai,j]i,j=1,…,p

$\mathbf{A}\equiv [a_{i,j}]_{i,j=1,...,p}$

##(6) Include the following text in red: “Mieux que l’amour, l’argent, la gloire, donnez moi la vérité.”, Henri David Thoreau

<span style="color: red;">“Mieux que l’amour, l’argent, la gloire, donnez moi la vérité.”, Henri David Thoreau</span>

##(7) Include a “More info” button with hide/unhide functionality such as:
  
<button data-toggle="collapse" data-target="#demo">
More info
</button>
<div id="demo" class="collapse">
<p>road to 6`r emo::ji('smirking face')`</p>

##(8)
<\div>
<div style="background-color: #FF9999; padding: 10px;">
**This** is a color box !
<\div>

##Exercise 2
##(2) Fetch data regarding Apple (AAPL), Cisco (CSCO), Intel Corporation (INTC), Home Depot (HD), Alphabet (GOOG), and JPMorgan Chase (JPM) stocks in the period between 2022-01-01 to 2023-01-01 using the package quantmod.

install.packages("quantmod")
library("quantmod")
mydates=c("01/01/22", "01/01/23")
mydates2<-as.Date(mydates, format="%m/%d/%y")
mydates2
getSymbols("AAPL", from = min(mydates2), to = max(mydates2))
getSymbols("CSCO", from = min(mydates2), to = max(mydates2))
getSymbols("INTC", from = min(mydates2), to = max(mydates2))
getSymbols("HD", from = min(mydates2), to = max(mydates2))
getSymbols("GOOG", from = min(mydates2), to = max(mydates2))
getSymbols("JPM", from = min(mydates2), to = max(mydates2))

##(3) Plot the closing price of AAPL and CSCO over the period between 2022-01-01 to 2023-01-01.

plot(AAPL$AAPL.close)

##(4) Plot a candle chart of GOOG and JPM over the last 3 months of 2022.

mydates=c("10/01/22, "O1/01/23")
mydates3<-as.Date(mydates, format="%m/%d/%y")
mydates3
getSymbols("AAPL", from = three_months_ago, to = today)
candleChart(AAPL, theme = 'white', type = 'candles')

##(5)Compute the mean and variance of all 6 time series using the closing price of the stocks.

mean(AAPL$AAPL.Close)
mean(CSCO$CSCO.Close)
mean(INTC$INTC.Close)
mean(HD$HD.Close)
mean(GOOG$GOOG.Close)
mean(JPM$JPM.Close)

var(AAPL$AAPL.Close)
var(CSCO$CSCO.Close)
var(INTC$INTC.Close)
var(HD$HD.Close)
var(GOOG$GOOG.Close)
var(JPM$JPM.Close)

##(6) Compare these 6 stocks by their annual Sharpe ratio S
 based on the last ten years (i.e. from 2013-01-01 to 2023-01-01). Consider that the yearly risk-free rate of return Rf
 is of 3.00%
 
mydates=c("01/01/2013", "12/31/2022")
mydates2013<-as.Date(mydates, format=%m/%d/%y)
mydates2013
getSymbols("AAPL", from = min(mydates2013), to = max(mydates2013))
getSymbols("CSCO", from = min(mydates2013), to = max(mydates2013))
getSymbols("INTC", from = min(mydates2013), to = max(mydates2013))
getSymbols("HD", from = min(mydates2013), to = max(mydates2013))
getSymbols("GOOG", from = min(mydates2013), to = max(mydates2013))
getSymbols("JPM", from = min(mydates2013), to = max(mydates2013))

mean(AAPL$AAPL.Close)
mean(CSCO$CSCO.Close)
mean(INTC$INTC.Close)
mean(HD$HD.Close)
mean(GOOG$GOOG.Close)
mean(JPM$JPM.Close)
mydates = c("01/01/2013", "12/31/2013")
mydates2013 <- as.Date(mydates, format=%m/%d/%y)

##(5)
library(quantmod)
getSymbols("AAPL", from = min(mydates2013), to = max(mydates2013))
getSymbols("CSCO", from = min(mydates2013), to = max(mydates2013))
getSymbols("INTC", from = min(mydates2013), to = max(mydates2013))
getSymbols("HD", from = min(mydates2013), to = max(mydates2013))
getSymbols("GOOG", from = min(mydates2013), to = max(mydates2013))
getSymbols("JPM", from = min(mydates2013), to = max(mydates2013))

mean(AAPL$AAPL.Close)
mean(CSCO$CSCO.Close)
mean(INTC$INTC.Close)
mean(HD$HD.Close)
mean(GOOG$GOOG.Close)
mean(JPM$JPM.Close)mydates2013 <- c("01/01/2013","12/31/2013")
mydates20133 <- as.Date(mydates2013, format = "%m/%d/%Y")
mydates20133

getSymbols("AAPL", from = min(mydates20133), to = max(mydates20133))
getSymbols("CSCO", from = min(mydates20133), to = max(mydates20133))
getSymbols("INTC", from = min(mydates20133), to = max(mydates20133))
getSymbols("HD", from = min(mydates20133), to = max(mydates20133))
getSymbols("GOOG", from = min(mydates20133), to = max(mydates20133))
getSymbols("JPM", from = min(mydates20133), to = max(mydates20133))

mean(AAPL$AAPL.Close)
mean(GOOG$GOOG.Close)
mean(JPM$JPM.Close)
mean(CSCO$CSCO.Close)
mean(INTC$INTC.Close)
mean(HD$HD.Close)

#(6)
AAPL_return = quantmod::dailyReturn(AAPL)
CSCO_return = quantmod::dailyReturn(CSCO)
INTC_return = quantmod::dailyReturn(INTC)
HD_return = quantmod::dailyReturn(HD)
GOOG_return = quantmod::dailyReturn(GOOG)
JPM_return = quantmod::dailyReturn(JPM)

#excess return
AAPL_excess = AAPL_return - 0.03/252
CSCO_excess = CSCO_return - 0.03/252
INTC_excess = INTC_return - 0.03/252
GOOG_excess = GOOG_return - 0.03/252
JPM_excess = JPM_return - 0.03/252
HD_excess = HD_return - 0.03/252

#yearly sharpe ratio
AAPL_sharpe_yearly = mean(AAPL_excess) / sd(AAPL_excess) * sqrt(252)
CSCO_sharpe_yearly = mean(CSCO_excess) / sd(CSCO_excess) * sqrt(252)
INTC_sharpe_yearly = mean(INTC_excess) / sd(INTC_excess) * sqrt(252)
HD_sharpe_yearly = mean(HD_excess) / sd(HD_excess) * sqrt(252)
GOOG_sharpe_yearly = mean(GOOG_excess) / sd(GOOG_excess) * sqrt(252)
JPM_sharpe_yearly = mean(JPM_excess) / sd(JPM_excess) * sqrt(252)

yearly_shape = cbind(AAPL_sharpe_yearly, CSCO_sharpe_yearly, INTC_sharpe_yearly, HD_sharpe_yearly, JPM_sharpe_yearly)

colnames(yearly_shape) = c("AAPL", "CSCO", "INTC", "HD", "GOOG", "JPM")
yearly_shape


L_return = quantmod::dailyReturn(AAPL)
CSCO_return = quantmod::dailyReturn(CSCO)
INTC_return = quantmod::dailyReturn(INTC)
HD_return = quantmod::dailyReturn(HD)
GOOG_return = quantmod::dailyReturn(GOOG)
JPM_return = quantmod::dailyReturn(JPM)

#excess return
AAPL_excess = AAPL_return - 0.03/252
CSCO_excess = CSCO_return - 0.03/252
INTC_excess = INTC_return - 0.03/252
GOOG_excess = GOOG_return - 0.03/252
JPM_excess = JPM_return - 0.03/252
#estimation of mean (mu) and variance (Sigma)
mat_return = cbind(AAPL_return, CSCO_return, INTC_return, HD_return, GOOG_return, JPM_return)
colnames (mat_return) = c("AAPL", "CSCO", "INTC", "HD", "GOOG", "JPM")

##(7)

#estimation of mean (mu) and variance (Sigma)
mat_return = cbind(AAPL_return, CSCO_return, INTC_return, HD_return, GOOG_return, JPM_return)
colnames (mat_return) = c("AAPL", "CSCO", "INTC", "HD", "GOOG", "JPM")

mu = apply(mat_return, 2, mean)
Sigma = var(mat_return)

# equally weighted portfolio
equal_return = (AAPL_return + CSCO_return + INTC_return + HD_return + GOOG_return + JPM_return)/6

muequal = mean(equal_return)
varequal = var(equal_return)

The individual variance of these 6 stocks are:
diag(Sigma)


##Bonus Question (8) Compute an optimally weighted portfolio (made of these 6 stocks) such that the variance of the returns of this portfolio is minimized. What are the weights for each individual stocks? How is the variance of this optimally weighted portfolio compared to the variance of the equally weighted portfolio?





